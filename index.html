<head>
  <title>subs</title>
  <meta charset="utf-8">
</head>

<link rel="stylesheet" type="text/css" href="srt.css">
<link rel="script" type="text/css" href="">

<body onload="salut()">
  <div id="container">
    <div id="srt">
      Bonjour
    </div>
    <div id="checklist">
      <li id="q1">vous avez un peu de temps</li>
      <li id="q2">il y a des chances que cette situation se reproduise</li>
      <li id="q3">all good</li>
    </div>
    <div id="bouttons">
      <button id="oui">oui</button>
      <button id="non">non</button>
    </div>
  </div>

  <script>

// TO DO

// peut être quand les gens reviennent tu leur parle en direct
// elle était bien la blague de "fermer des fenetres pendant une heure"
// mathilde elle dit qu'il faut qu'on puisse revenir en arrière

// ptin alors si ils ferment la fenetre et reviennent
// faudrait gérer un truc avec des cookies pour qu'ils repartent du même endroit dans les SRT
// quand ils reviennent sur le zonz
// GENRE y'a des parties et quand tu reviens dans la partie 0-15 ou 16-28
// les srt ça soit genre
// "ah salut où on en était déjà la dernière fois"
// "ah oui la partie où je parlais de la touche n"
// ou "ah oui la partie où je faisais une digression où je parlais de base de donnée"

// julien dit : "c'est cool de maitriser le temps"

var toggle=false
// ce toggle a la con sert juste à bloquer la progression du compteur le temps de la fonction
// salut() qui sert à display un message 2 seconde puis incrémenter le compteur de 1.
// sinon le bordel s'emballe tout de suite après (la fonction delay semble juste mettre en pause
// tous les inputs du clavier

var fin=false
//pour séparer le tableau non du tableau oui

var relou=false
// lui il sert juste à changer ce que font les boutons quand la seconde question est posée
var compteur = 0

var firstq = null

var delay = 3000
// le premier delay de defilement auto entre data[0] et data[1]

var data = {
  "0":"Bonjour",
  "1":"Vous pouvez appuyer sur la touche n de votre clavier s’il vous plaît?",
  "2":"Merci ",
  "3":"Euh en fait vous pouvez encore appuyer sur la touche n",
  "4":"on a qu’a dire que dès que vous avez lu ce qui est écrit",
  "5":"vous pouvez appuyer sur la touche n quoi",
  "6":"à votre rythme",
  "7":"c’est vous qui décidez",
  "8":"par contre prenez garde",
  "9":"il est impossible de revenir en arrière",
  "10":"c’est un peu comme si nous étions vraiment en train d’avoir une conversation",
  "11":"on fait un bout de chemin ensemble, et si vous partez",
  "12":"on reprendra simplement là où on s’est arrêté.",
  "13":"vous pouvez d’ailleurs partir maintenant si vous voulez faire une pause,",
  "14":"vous pouvez fermer votre navigateur et tout.",
  "15":"à votre guise.",
  "16":"bon je me présente quand même",
  "17":"c’est samuel je travaille pour l’amicale de production",
  "18":"je m’occupe de trucs en rapport avec internet ",
  "19":"en rapport avec le reste de l’équipe,",
  "20":"et étienne et guillaume les développeurs.",
  "21":"là je suis pas vraiment en train de vous parler pour de vrai d’ailleurs",
  "22":"en fait j’ai écrit ce texte il y a {quelques mois}",
  "23":"et là présentement je suis sûrement en train de {en fonction de l’heure, au restau, etc}.",
  "24":"il reste que je vous souhaite la bienvenue sur ce site",
  "25":"bienvenue",
  "26":"...",
  "27":"Bon alors en fait je suis venu pour vous poser quelques questions",
  "28":"ça va prendre quoi, 3 minutes",
  "29":"le temps de préparer ensemble le terrain",
  "30":"histoire que vous soyez dans les bonnes conditions le jour du spectacle.",
  "31":"on va faire un truc là",
  "32":"pour que vous puissiez me répondre",
  "33":"hop",
  "34":"bon alors déjà",
  "35":"est ce que vous avez trois minutes?",
  "36":"ok, super",
  "37":"voila voila",
  "38":"et est ce que ça vous arrivera à nouveau d’avoir trois minutes dans l’avenir?",
  "39":"ok",
  "40":"et est ce que vous aurez carrément une heure et demie bien tranquille devant vous ce samedi à 20h?",
  "41":"ça marche",
  "42":"beh alors",
  "43":"pourquoi elle se met pas à jour la liste en bas?",
  "44":"hmmm",
  "45":"peut-être qu'on a pas vraiment bien répondu à la dernière question",
  "46":"c'est ça Étienne non?",
  "47":"...",
  "48":"bon il répond pas.",
  "49":"c'est sûrement ça",
  "50":"euh alors c'est quoi avoir une heure et demie tranquille",
  "51":"ben déjà, est ce que vous serez chez vous?",
  "52":"est ce que vous pourrez faire en sorte d'être dans un espace calme, intime?",
  "53":"est ce que vous pourrez faire en sorte d'être plus ou moins seul dans ledit espace?",
  "54":"est ce que vous pourrez vous placer devant votre ordinateur un peu avant le début du spectacle, metteons à 19h50?",
  "55":"et puis on se dirait que, sans forcément éteindre votre portable, vous vous engagiez à ne pas y répondre?",
  "56":"à ne pas regarder un film en même temps?",
  "57":"bref à être vraiment là quoi?",
  "58":"bon, c'est super.",
  "59":"ah ben voila la checklist s'est mise à jour",
  "60":"vous êtes maintenant vraiment inscrit au spectacle",
  "61":"vous êtes un S.À.L.M.",
  "62":"un Spectateur À La Maison.",
  "63":"vous n'avez qu'a revenir sur ce site web",
  "64":"à 19H50 donc, ce samedi.",
  "65":"j'ai hâte de vous y retrouver.",
  "66":"tout bien",
  "67":"bisous",
  "68":"samuel",
  "69":"...",
  "70":"revenez dans (décompte)"
}

function next(){
  var currentSub = data[compteur]
  document.getElementById("srt").innerHTML = currentSub
  document.getElementById("oui").blur();
  document.getElementById("non").blur();
  // ça c'est pour virer le focus des boutons oui et non histoire de pas les activer en appuyant sur espace
}

document.onkeydown = function(e) {

  e = e || window.event
/*
pour revenir en arrière
  if(e.keyCode =='37' && compteur > 0){
    compteur -=1
    next();
  }
  */

//  KEYCODE 32 IS SPACEBAR
// KEYCIODE 78 IS "n"

if(e.keyCode =='32' && fin == false && compteur < Object.keys(data).length-1 && compteur > 0 && compteur != 2 && compteur != 35 && compteur !=38 && compteur !=40 && (compteur <51 || compteur>57)){
  compteur +=1
  next();
}

console.log(compteur)

//CUES

// ptin on pourrait faire comment pour override les fonctions avec du délai si le client appuie une première fois sur espace 
// genre neuneu = false

if(compteur==2 && toggle==false){
  salut()
  toggle = true;
  // aaaah le gros truc de gogole
}  

if(compteur==4){
  toggle = false;
}

if(compteur==33){
// test de truc qui se range sur le côté pour faire de la place à la checklist
document.getElementById("srt").style.top = "18%"
}

if(compteur==35 | compteur ==38 | compteur ==40 | compteur ==51){
// tout les moments où il faut que les boutons apparaissent
document.getElementById("bouttons").style.opacity = "1"
toggle = true;
}

if(compteur==37){
  document.getElementById("q1").style.opacity = "1"
}

if(compteur==40){
  if (firstq == false) {
    document.getElementById("q2").innerHTML = "mais c'est temporaire"
  }
  document.getElementById("q2").style.opacity = "1"
}

if(compteur==59){
  document.getElementById("q3").style.opacity = "1"
  document.getElementById("container").style.backgroundColor = "white"
  document.body.style.color = "black"
}

// fin keydown
}

function salut(){

  setTimeout(function() {
    compteur +=1;
    next();
  }, delay);

}

document.getElementById("oui").addEventListener("click", function(){

  if(compteur==35){
    firstq=true
  }

  if(compteur==38){
    setTimeout(function(){
      document.getElementById("oui").innerHTML = "oui"
    },1000)
  }

  if(compteur>50 && compteur <57){
    compteur +=1 
    next()
  }else{

    document.getElementById("bouttons").style.opacity = "0"
    setTimeout(function() {
      compteur +=1;
      next()
    }, 1000)
  }
}
)


document.getElementById("non").addEventListener("click", function(){

  if(compteur==35){
    firstq = false
    data[36]="ah ok zut"
    data[37]="euh"
    data[38]="du coup dans le futur y'a moyen que vous n'ayez pas non plus le temps?"
    document.getElementById("q1").style.listStyleImage ="url('nope.ico')"
    document.getElementById("q1").innerHTML = "vous êtes pressé"
    setTimeout(function() {
      document.getElementById("oui").innerHTML = "si peut-être"
    }, 1000)
  }

  if(compteur==38){
    document.getElementById("q2").style.listStyleImage ="url('nope.ico')"
    data[40]="du coup samedi à 20h vous avez pas le temps quoi"
    if(firstq){
      document.getElementById("q2").innerHTML = "mais c'est chaud"
    }
    setTimeout(function(){
      document.getElementById("oui").innerHTML = "ah ben si, justement ce soir là j'ai rien de prévu marrant."
    },1000)

  }

  document.getElementById("bouttons").style.opacity = "0"
  setTimeout(function() {
    compteur +=1;
    next()
  }, 1000)
}
)



</script>

</body>

