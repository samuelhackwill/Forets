<head>
  <title>Le pont</title>
  <meta charset="utf-8">
</head>

<link rel="stylesheet" type="text/css" href="srt.css">

<body onload="zoupage()">
  <div id="container">
    <div id="srt">
      Bonjour
    </div>
    <div id="checklist">
   <!--   <li id="q1"></li> -->
    </div>
    <div id="bouttons">
      <button id="oui">oui</button>
      <button id="non">non</button>
    </div>
  </div>

  <script>

var compteur = 0

var data = []

function loadJSON(callback) {   

  var xobj = new XMLHttpRequest();
  xobj.overrideMimeType("application/json");
    xobj.open('GET', '/libs/output.json', true); // Replace 'my_data' with the path to your file
    xobj.onreadystatechange = function () {
      if (xobj.readyState == 4 && xobj.status == "200") {
            // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
            callback(xobj.responseText);
          }
        };
        xobj.send(null);  
      }

//usage:
function zoupage() {
 loadJSON(function(response) {
  // Parse JSON string into object
  var actual_JSON = JSON.parse(response);

  for(i=0; i<actual_JSON.length; i++){
    if(actual_JSON[i]["type"] == "text" ){
      data.push(actual_JSON[i]["text"])
    }else{
    }        

  }

});
}

function next(){
  console.log(compteur)
  var currentSub = data[compteur]
  var currentBalise = data[compteur]["type"]
  document.getElementById("srt").innerHTML = currentSub
  // Ã§a c'est pour virer le focus des boutons oui et non histoire de pas les activer en appuyant sur espace
}

document.onkeydown = function(e) {

  e = e || window.event


  //  KEYCODE 32 IS SPACEBAR
  // KEYCIODE 78 IS "n"

  if(e.keyCode =='32' && compteur <= data.length){
    compteur +=1
    next();
  }

}

</script>

</body>

